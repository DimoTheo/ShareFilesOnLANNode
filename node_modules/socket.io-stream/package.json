{
  "name": "socket.io-stream",
  "version": "0.6.0",
  "description": "stream for socket.io",
  "author": {
    "name": "Naoyuki Kanezawa",
    "email": "naoyuki.kanezawa@gmail.com"
  },
  "contributors": [
    {
      "name": "Naoyuki Kanezawa",
      "email": "naoyuki.kanezawa@gmail.com"
    },
    {
      "name": "Aaron O'Mullan",
      "email": "aaron.omullan@friendco.de"
    }
  ],
  "keywords": [
    "stream",
    "socket.io",
    "binary",
    "file",
    "upload",
    "download"
  ],
  "repository": {
    "type": "git",
    "url": "git://github.com/nkzawa/socket.io-stream.git"
  },
  "scripts": {
    "test": "make test"
  },
  "dependencies": {
    "component-bind": "~1.0.0",
    "debug": "~2.1.0"
  },
  "devDependencies": {
    "blob": "0.0.4",
    "browserify": "~6.1.0",
    "expect.js": "~0.3.1",
    "mocha": "~1.21.5",
    "socket.io": "~1.1.0",
    "socket.io-client": "~1.1.0",
    "zuul": "~1.11.2"
  },
  "readme": "# Socket.IO stream\n[![Build Status](https://travis-ci.org/nkzawa/socket.io-stream.png?branch=master)](https://travis-ci.org/nkzawa/socket.io-stream)\n[![NPM version](https://badge.fury.io/js/socket.io-stream.png)](http://badge.fury.io/js/socket.io-stream)\n\nThis is the module for bidirectional binary data transfer with Stream 2 API through [Socket.IO](https://github.com/LearnBoost/socket.io).\n\n## Installation\n    $ npm install socket.io-stream\n\n## Usage\nIf you are not familiar with Stream API, be sure to check out [the docs](http://nodejs.org/api/stream.html).\nI also recommend checking out the awesome [Stream Handbook](https://github.com/substack/stream-handbook):\n\nFor streaming between servers and clients, you must send stream instances first.\nTo receive streams, you just wrap `socket` with `socket.io-stream`, then listen any events as usual.\n\nServer:\n```js\nvar io = require('socket.io').listen(80);\nvar ss = require('socket.io-stream');\nvar path = require('path');\n\nio.of('/user').on('connection', function(socket) {\n  ss(socket).on('profile-image', function(stream, data) {\n    var filename = path.basename(data.name);\n    stream.pipe(fs.createWriteStream(filename));\n  });\n});\n```\n\n`createStream()` will return a new stream which can be sent by `emit`.\n\nClient:\n```js\nvar io = require('socket.io-client');\nvar ss = require('socket.io-stream');\n\nvar socket = io.connect('http://example.com/user');\nvar stream = ss.createStream();\nvar filename = 'profile.jpg';\n\nss(socket).emit('profile-image', stream, {name: filename});\nfs.createReadStream(filename).pipe(stream);\n```\n\nYou can stream data from a client to server, and vice versa.\n\n```js\n// send data\nss(socket).on('file', function(stream) {\n  fs.createReadStream('/path/to/file').pipe(stream);\n});\n\n// receive data\nss(socket).emit('file', stream);\nstream.pipe(fs.createWriteStream('file.txt'));\n```\n\n### Browser\nThis module can be used on the browser. To do so, just copy a file to a public directory.\n\n    $ cp node_modules/socket.io-stream/socket.io-stream.js somewhere/public/\n\nYou can also use [browserify](http://github.com/substack/node-browserify) to build manually.\n\n    $ npm install browserify -g\n    $ cd node_modules/socket.io-stream\n    $ browserify index.js -s ss > socket.io-stream.js\n\n```html\n<input id=\"file\" type=\"file\" />\n\n<script src=\"/socket.io/socket.io.js\"></script>\n<script src=\"/js/socket.io-stream.js\"></script>\n<script src=\"/js/jquery.js\"></script>\n<script>\n$(function() {\n  var socket = io.connect('/foo');\n\n  $('#file').change(function(e) {\n    var file = e.target.files[0];\n    var stream = ss.createStream();\n\n    // upload a file to the server.\n    ss(socket).emit('file', stream, {size: file.size});\n    ss.createBlobReadStream(file).pipe(stream);\n  });\n});\n</script>\n```\n\n#### Upload progress\nYou can track upload progress like the following:\n\n```js\nvar blobStream = ss.createBlobReadStream(file);\nvar size = 0;\n\nblobStream.on('data', function(chunk) {\n  size += chunk.length;\n  console.log(Math.floor(size / file.size * 100) + '%');\n  // -> e.g. '42%'\n});\n\nblobStream.pipe(stream);\n```\n\n### Supporting Socket.IO 0.9\nYou have set `forceBase64` option `true` when using on socket.io v0.9.x.\n\n```js\nss.forceBase64 = true;\n```\n\n\n## Documentation\n\n### ss(sio)\n- sio `socket.io Socket` A socket of Socket.IO, both for client and server\n- return `Socket`\n\nLook up an existing `Socket` instance based on `sio` (a socket of Socket.IO), or create one if it doesn't exist.\n\n### socket.emit(event, [arg1], [arg2], [...])\n- event `String` The event name\n\nEmit an `event` with variable args including at least a stream.\n\n```js\nss(socket).emit('myevent', stream, {name: 'thefilename'}, function() { ... });\n// send some streams at a time.\nss(socket).emit('multiple-streams', stream1, stream2);\n```\n\n### socket.on(event, [options], listener)\n- event `String` The event name\n- options `Object` options for received Streams\n    - highWaterMark `Number`\n    - encoding `String`\n    - decodeStrings `Boolean`\n    - objectMode `Boolean`\n- listener `Function` The event handler function\n\nAdd a `listener` for `event`. `listener` will take streams with any data as arguments. `options` is an object for streams.\n\n```js\nss(socket).on('myevent', function(stream, data, callback) { ... });\n// with options\nss(socket).on('any', {highWaterMark: 64 * 1024}, function(stream) { ... });\n```\n\n### ss.createStream([options])\n- options `Object`\n    - highWaterMark `Number`\n    - encoding `String`\n    - decodeStrings `Boolean`\n    - objectMode `Boolean`\n- return `Duplex Stream`\n\nCreate a new duplex stream. See [the docs](http://nodejs.org/api/stream.html) for the details of stream and `options`.\n\n```js\nvar stream = ss.createStream();\n```\n\n### ss.createBlobReadStream(blob, [options])\n- options `Object`\n    - highWaterMark `Number`\n    - encoding `String`\n    - objectMode `Boolean`\n- return `Readable Stream`\n\nCreate a new readable stream for [Blob](https://developer.mozilla.org/en-US/docs/Web/API/Blob) and [File](https://developer.mozilla.org/en-US/docs/Web/API/File) on browser. See [the docs](http://nodejs.org/api/stream.html) for the details of stream and `options`.\n\n```js\nvar stream = ss.createBlobReadStream(new Blob([1, 2, 3]));\n```\n\n## License\n\nMIT\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/nkzawa/socket.io-stream/issues"
  },
  "_id": "socket.io-stream@0.6.0",
  "dist": {
    "shasum": "cdabf5d881bc4b82e78d405afc1ac7cabc41da2d"
  },
  "_from": "socket.io-stream@",
  "_resolved": "https://registry.npmjs.org/socket.io-stream/-/socket.io-stream-0.6.0.tgz"
}
